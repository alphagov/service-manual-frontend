.search {
  @extend %contain-floats;

  &__label {
    color: $white;
  }

  &__input {
    float: left;
    width: 100%;

    input {
      width: 100%;
      margin: 0.5em 0;
      padding: 6px;

      @include core-19($line-height: (28 / 19), $line-height-640: (28 / 16));
    }
  }

  &__submit {
    float: left;
    background: $black;
    color: $white;
    border: 0;
    padding: 6px;
  }

  // IE6 + IE7 always get the simpler version, regardless of whether javascript
  // is enabled
  @if ($is-ie == false) or ($ie-version >= 8) {
    &__input {
      @include box-sizing(border-box);

      padding-right: 40px;
      margin-right: -40px;

      input {
        @include box-sizing(border-box);
        @include appearance(none);

        position: relative;
        height: 40px;
        padding: 6px;
        margin: 0;

        border: 0;
        outline-offset: 0;
      }
    }

    &__submit {
      @include box-sizing(border-box);
      float: left;
      height: 40px;
      width: 40px;

      border: none;
      cursor: pointer;

      overflow: hidden;
      text-indent: -5000px;
      background: $black image-url("search-button.png") no-repeat 2px 50%;

      @include device-pixel-ratio() {
        background-size: 52.5px 35px;
        background-position: 115% 50%;
      }

      &:hover {
        background-color: lighten($black, 5%);
      }

      &:focus {
        z-index: 10;
        position: relative;
      }

      @include border-radius(0);
    }

    // If JS is enabled, and browser is not IE6 or IE7, position label as a
    // placeholder
    .js-enabled & {
      position: relative;
      background: $white;

      // Absolutely position the label behind the input
      &__label {
        @include core-19($line-height: 40px, $line-height-640: 40px);
        display: block;
        position: absolute;
        width: 100%;
        left: 0;
        top: 1px;
        z-index: 5;

        text-indent: 15px;

        color: $secondary-text-colour;
      }

      // Input is transparent and sits above the label
      &__input input {
        position: relative;
        z-index: 10;

        // Internet Explorer does not play well with "empty" elements.
        // Providing a background image somehow makes them work. ¯\_(ツ)_/¯
        background: transparent url('data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==');

        // Javascript gives input a confusingly named `focus` class when it is
        // not empty, and setting the background to white hides the label.
        &:focus,
        &.focus {
          background: $white;
        }

        &:focus {
          z-index: 20;
        }
      }

      &__submit {
        position: relative;
        z-index: 15;
      }
    }
  }
}
